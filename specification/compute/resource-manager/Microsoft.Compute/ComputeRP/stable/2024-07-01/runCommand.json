{
  "swagger": "2.0",
  "info": {
    "title": "RunCommandsClient",
    "version": "2024-07-01",
    "description": "The Run Commands Client."
  },
  "schemes": [
    "https"
  ],
  "host": "management.azure.com",
  "produces": [
    "application/json",
    "text/json"
  ],
  "consumes": [
    "application/json",
    "text/json"
  ],
  "security": [
    {
      "azure_auth": [
        "user_impersonation"
      ]
    }
  ],
  "securityDefinitions": {
    "azure_auth": {
      "type": "oauth2",
      "description": "Azure Active Directory OAuth2 Flow",
      "flow": "implicit",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "scopes": {
        "user_impersonation": "impersonate your user account"
      }
    }
  },
  "paths": {
    "/subscriptions/{subscriptionId}/providers/Microsoft.Compute/locations/{location}/runCommands": {
      "get": {
        "operationId": "VirtualMachineRunCommands_List",
        "tags": [
          "VirtualMachineRunCommands"
        ],
        "description": "Lists all available run commands for a subscription in a location.",
        "parameters": [
          {
            "name": "location",
            "in": "path",
            "description": "The location upon which run commands is queried.",
            "required": true,
            "type": "string",
            "pattern": "^[-\\w\\._]+$"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/RunCommandListResult"
            }
          }
        },
        "x-ms-examples": {
          "VirtualMachineRunCommandList": {
            "$ref": "./examples/runCommandExamples/RunCommand_List.json"
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextLink"
        }
      }
    },
    "/subscriptions/{subscriptionId}/providers/Microsoft.Compute/locations/{location}/runCommands/{commandId}": {
      "get": {
        "operationId": "VirtualMachineRunCommands_Get",
        "tags": [
          "VirtualMachineRunCommands"
        ],
        "description": "Gets specific run command for a subscription in a location.",
        "parameters": [
          {
            "name": "location",
            "in": "path",
            "description": "The location upon which run commands is queried.",
            "required": true,
            "type": "string",
            "pattern": "^[-\\w\\._]+$"
          },
          {
            "name": "commandId",
            "in": "path",
            "description": "The command id.",
            "required": true,
            "type": "string"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/RunCommandDocument"
            }
          }
        },
        "x-ms-examples": {
          "VirtualMachineRunCommandGet": {
            "$ref": "./examples/runCommandExamples/RunCommand_Get.json"
          }
        }
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Compute/virtualMachineScaleSets/{vmScaleSetName}/virtualMachines/{instanceId}/runCommands": {
      "get": {
        "operationId": "VirtualMachineScaleSetVMRunCommands_List",
        "tags": [
          "VirtualMachineScaleSetVMRunCommands"
        ],
        "description": "The operation to get all run commands of an instance in Virtual Machine Scaleset.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmScaleSetName",
            "in": "path",
            "description": "The name of the VM scale set.",
            "required": true,
            "type": "string"
          },
          {
            "name": "instanceId",
            "in": "path",
            "description": "The instance ID of the virtual machine.",
            "required": true,
            "type": "string"
          },
          {
            "name": "$expand",
            "in": "query",
            "description": "The expand expression to apply on the operation.",
            "required": false,
            "type": "string"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommandsListResult"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "List run commands in Vmss instance.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineScaleSetVMRunCommand_List.json"
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextLink"
        }
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Compute/virtualMachineScaleSets/{vmScaleSetName}/virtualMachines/{instanceId}/runCommands/{runCommandName}": {
      "get": {
        "operationId": "VirtualMachineScaleSetVMRunCommands_Get",
        "tags": [
          "VirtualMachineScaleSetVMRunCommands"
        ],
        "description": "The operation to get the VMSS VM run command.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmScaleSetName",
            "in": "path",
            "description": "The name of the VM scale set.",
            "required": true,
            "type": "string"
          },
          {
            "name": "instanceId",
            "in": "path",
            "description": "The instance ID of the virtual machine.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommandName",
            "in": "path",
            "description": "The name of the virtual machine run command.",
            "required": true,
            "type": "string"
          },
          {
            "name": "$expand",
            "in": "query",
            "description": "The expand expression to apply on the operation.",
            "required": false,
            "type": "string"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "Get VirtualMachineScaleSet VM run commands.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineScaleSetVMRunCommand_Get.json"
          }
        }
      },
      "put": {
        "operationId": "VirtualMachineScaleSetVMRunCommands_CreateOrUpdate",
        "tags": [
          "VirtualMachineScaleSetVMRunCommands"
        ],
        "description": "The operation to create or update the VMSS VM run command.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmScaleSetName",
            "in": "path",
            "description": "The name of the VM scale set.",
            "required": true,
            "type": "string"
          },
          {
            "name": "instanceId",
            "in": "path",
            "description": "The instance ID of the virtual machine.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommandName",
            "in": "path",
            "description": "The name of the virtual machine run command.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommand",
            "in": "body",
            "description": "Parameters supplied to the Create Virtual Machine RunCommand operation.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          "201": {
            "description": "Created",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "Create VirtualMachineScaleSet VM run command.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineScaleSetVMRunCommand_CreateOrUpdate.json"
          }
        },
        "x-ms-long-running-operation": true
      },
      "patch": {
        "operationId": "VirtualMachineScaleSetVMRunCommands_Update",
        "tags": [
          "VirtualMachineScaleSetVMRunCommands"
        ],
        "description": "The operation to update the VMSS VM run command.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmScaleSetName",
            "in": "path",
            "description": "The name of the VM scale set.",
            "required": true,
            "type": "string"
          },
          {
            "name": "instanceId",
            "in": "path",
            "description": "The instance ID of the virtual machine.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommandName",
            "in": "path",
            "description": "The name of the virtual machine run command.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommand",
            "in": "body",
            "description": "Parameters supplied to the Update Virtual Machine RunCommand operation.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommandUpdate"
            }
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "Update VirtualMachineScaleSet VM run command.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineScaleSetVMRunCommand_Update.json"
          }
        },
        "x-ms-long-running-operation": true
      },
      "delete": {
        "operationId": "VirtualMachineScaleSetVMRunCommands_Delete",
        "tags": [
          "VirtualMachineScaleSetVMRunCommands"
        ],
        "description": "The operation to delete the VMSS VM run command.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmScaleSetName",
            "in": "path",
            "description": "The name of the VM scale set.",
            "required": true,
            "type": "string"
          },
          {
            "name": "instanceId",
            "in": "path",
            "description": "The instance ID of the virtual machine.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommandName",
            "in": "path",
            "description": "The name of the virtual machine run command.",
            "required": true,
            "type": "string"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "202": {
            "description": "Accepted"
          },
          "204": {
            "description": "No Content"
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "Delete VirtualMachineScaleSet VM run command.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineScaleSetVMRunCommand_Delete.json"
          }
        },
        "x-ms-long-running-operation": true
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Compute/virtualMachineScaleSets/{vmScaleSetName}/virtualmachines/{instanceId}/runCommand": {
      "post": {
        "operationId": "VirtualMachineScaleSetVMs_RunCommand",
        "tags": [
          "VirtualMachineScaleSetVMs"
        ],
        "description": "Run command on a virtual machine in a VM scale set.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmScaleSetName",
            "in": "path",
            "description": "The name of the VM scale set.",
            "required": true,
            "type": "string"
          },
          {
            "name": "instanceId",
            "in": "path",
            "description": "The instance ID of the virtual machine.",
            "required": true,
            "type": "string"
          },
          {
            "name": "parameters",
            "in": "body",
            "description": "Parameters supplied to the Run command operation.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/RunCommandInput"
            }
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/RunCommandResult"
            }
          },
          "202": {
            "description": "Accepted"
          }
        },
        "x-ms-examples": {
          "VirtualMachineScaleSetVMs_RunCommand": {
            "$ref": "./examples/runCommandExamples/VirtualMachineScaleSetVMRunCommand.json"
          }
        },
        "x-ms-long-running-operation-options": {
          "final-state-via": "location"
        },
        "x-ms-long-running-operation": true
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Compute/virtualMachines/{vmName}/runCommand": {
      "post": {
        "operationId": "VirtualMachines_RunCommand",
        "tags": [
          "VirtualMachines"
        ],
        "description": "Run command on the VM.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmName",
            "in": "path",
            "description": "The name of the virtual machine.",
            "required": true,
            "type": "string"
          },
          {
            "name": "parameters",
            "in": "body",
            "description": "Parameters supplied to the Run command operation.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/RunCommandInput"
            }
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/RunCommandResult"
            }
          },
          "202": {
            "description": "Accepted"
          }
        },
        "x-ms-examples": {
          "VirtualMachineRunCommand": {
            "$ref": "./examples/runCommandExamples/VirtualMachineRunCommand.json"
          }
        },
        "x-ms-long-running-operation-options": {
          "final-state-via": "location"
        },
        "x-ms-long-running-operation": true
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Compute/virtualMachines/{vmName}/runCommands": {
      "get": {
        "operationId": "VirtualMachineRunCommands_ListByVirtualMachine",
        "tags": [
          "VirtualMachineRunCommands"
        ],
        "description": "The operation to get all run commands of a Virtual Machine.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmName",
            "in": "path",
            "description": "The name of the virtual machine containing the run command.",
            "required": true,
            "type": "string"
          },
          {
            "name": "$expand",
            "in": "query",
            "description": "The expand expression to apply on the operation.",
            "required": false,
            "type": "string"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommandsListResult"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "List run commands in a Virtual Machine.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineRunCommand_List.json"
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextLink"
        }
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Compute/virtualMachines/{vmName}/runCommands/{runCommandName}": {
      "get": {
        "operationId": "VirtualMachineRunCommands_GetByVirtualMachine",
        "tags": [
          "VirtualMachineRunCommands"
        ],
        "description": "The operation to get the run command.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmName",
            "in": "path",
            "description": "The name of the virtual machine containing the run command.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommandName",
            "in": "path",
            "description": "The name of the virtual machine run command.",
            "required": true,
            "type": "string"
          },
          {
            "name": "$expand",
            "in": "query",
            "description": "The expand expression to apply on the operation.",
            "required": false,
            "type": "string"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "Get a run command.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineRunCommand_Get.json"
          }
        }
      },
      "put": {
        "operationId": "VirtualMachineRunCommands_CreateOrUpdate",
        "tags": [
          "VirtualMachineRunCommands"
        ],
        "description": "The operation to create or update the run command.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmName",
            "in": "path",
            "description": "The name of the virtual machine where the run command should be created or updated.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommandName",
            "in": "path",
            "description": "The name of the virtual machine run command.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommand",
            "in": "body",
            "description": "Parameters supplied to the Create Virtual Machine RunCommand operation.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          "201": {
            "description": "Created",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "Create or update a run command.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineRunCommand_CreateOrUpdate.json"
          }
        },
        "x-ms-long-running-operation": true
      },
      "patch": {
        "operationId": "VirtualMachineRunCommands_Update",
        "tags": [
          "VirtualMachineRunCommands"
        ],
        "description": "The operation to update the run command.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmName",
            "in": "path",
            "description": "The name of the virtual machine where the run command should be updated.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommandName",
            "in": "path",
            "description": "The name of the virtual machine run command.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommand",
            "in": "body",
            "description": "Parameters supplied to the Update Virtual Machine RunCommand operation.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommandUpdate"
            }
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/VirtualMachineRunCommand"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "Update a run command.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineRunCommand_Update.json"
          }
        },
        "x-ms-long-running-operation": true
      },
      "delete": {
        "operationId": "VirtualMachineRunCommands_Delete",
        "tags": [
          "VirtualMachineRunCommands"
        ],
        "description": "The operation to delete the run command.",
        "parameters": [
          {
            "name": "resourceGroupName",
            "in": "path",
            "description": "The name of the resource group.",
            "required": true,
            "type": "string"
          },
          {
            "name": "vmName",
            "in": "path",
            "description": "The name of the virtual machine where the run command should be deleted.",
            "required": true,
            "type": "string"
          },
          {
            "name": "runCommandName",
            "in": "path",
            "description": "The name of the virtual machine run command.",
            "required": true,
            "type": "string"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "../../../common-types/v1/common.json#/parameters/SubscriptionIdParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "202": {
            "description": "Accepted"
          },
          "204": {
            "description": "No Content"
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "../../../common-types/v1/common.json#/definitions/CloudError"
            }
          }
        },
        "x-ms-examples": {
          "Delete a run command.": {
            "$ref": "./examples/runCommandExamples/VirtualMachineRunCommand_Delete.json"
          }
        },
        "x-ms-long-running-operation": true
      }
    }
  },
  "definitions": {
    "RunCommandDocument": {
      "type": "object",
      "description": "Describes the properties of a Run Command.",
      "properties": {
        "script": {
          "type": "array",
          "description": "The script to be executed.",
          "items": {
            "type": "string"
          }
        },
        "parameters": {
          "type": "array",
          "description": "The parameters used by the script.",
          "items": {
            "$ref": "#/definitions/RunCommandParameterDefinition"
          },
          "x-ms-identifiers": [
            "name",
            "type"
          ]
        }
      },
      "required": [
        "script"
      ],
      "allOf": [
        {
          "$ref": "#/definitions/RunCommandDocumentBase"
        }
      ]
    },
    "RunCommandDocumentBase": {
      "type": "object",
      "description": "Describes the properties of a Run Command metadata.",
      "properties": {
        "$schema": {
          "type": "string",
          "description": "The VM run command schema."
        },
        "id": {
          "type": "string",
          "description": "The VM run command id."
        },
        "osType": {
          "type": "string",
          "description": "The Operating System type.",
          "enum": [
            "Windows",
            "Linux"
          ],
          "x-ms-enum": {
            "name": "OperatingSystemTypes",
            "modelAsString": false
          }
        },
        "label": {
          "type": "string",
          "description": "The VM run command label."
        },
        "description": {
          "type": "string",
          "description": "The VM run command description."
        }
      },
      "required": [
        "$schema",
        "id",
        "osType",
        "label",
        "description"
      ]
    },
    "RunCommandInput": {
      "type": "object",
      "description": "Capture Virtual Machine parameters.",
      "properties": {
        "commandId": {
          "type": "string",
          "description": "The run command id."
        },
        "script": {
          "type": "array",
          "description": "Optional. The script to be executed.  When this value is given, the given script will override the default script of the command.",
          "items": {
            "type": "string"
          }
        },
        "parameters": {
          "type": "array",
          "description": "The run command parameters.",
          "items": {
            "$ref": "#/definitions/RunCommandInputParameter"
          },
          "x-ms-identifiers": [
            "name"
          ]
        }
      },
      "required": [
        "commandId"
      ]
    },
    "RunCommandInputParameter": {
      "type": "object",
      "description": "Describes the properties of a run command parameter.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The run command parameter name."
        },
        "value": {
          "type": "string",
          "description": "The run command parameter value."
        }
      },
      "required": [
        "name",
        "value"
      ]
    },
    "RunCommandListResult": {
      "type": "object",
      "description": "The List Virtual Machine operation response.",
      "properties": {
        "value": {
          "type": "array",
          "description": "The list of virtual machine run commands.",
          "items": {
            "$ref": "#/definitions/RunCommandDocumentBase"
          }
        },
        "nextLink": {
          "type": "string",
          "description": "The uri to fetch the next page of run commands. Call ListNext() with this to fetch the next page of run commands."
        }
      },
      "required": [
        "value"
      ]
    },
    "RunCommandManagedIdentity": {
      "type": "object",
      "description": " Contains clientId or objectId (use only one, not both) of a user-assigned managed identity that has access to storage blob used in Run Command. Use an empty RunCommandManagedIdentity object in case of system-assigned identity. Make sure the Azure storage blob exists in case of scriptUri, and managed identity has been given access to blob's container with 'Storage Blob Data Reader' role assignment with scriptUri blob and 'Storage Blob Data Contributor' for Append blobs(outputBlobUri, errorBlobUri). In case of user assigned identity, make sure you add it under VM's identity. For more info on managed identity and Run Command, refer https://aka.ms/ManagedIdentity and https://aka.ms/RunCommandManaged.",
      "properties": {
        "clientId": {
          "type": "string",
          "description": "Client Id (GUID value) of the user-assigned managed identity. ObjectId should not be used if this is provided."
        },
        "objectId": {
          "type": "string",
          "description": "Object Id (GUID value) of the user-assigned managed identity. ClientId should not be used if this is provided."
        }
      }
    },
    "RunCommandParameterDefinition": {
      "type": "object",
      "description": "Describes the properties of a run command parameter.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The run command parameter name."
        },
        "type": {
          "type": "string",
          "description": "The run command parameter type."
        },
        "defaultValue": {
          "type": "string",
          "description": "The run command parameter default value."
        },
        "required": {
          "type": "boolean",
          "description": "The run command parameter required.",
          "default": false
        }
      },
      "required": [
        "name",
        "type"
      ]
    },
    "RunCommandResult": {
      "type": "object",
      "properties": {
        "value": {
          "type": "array",
          "description": "Run command operation response.",
          "items": {
            "$ref": "./computeRPCommon.json#/definitions/InstanceViewStatus"
          },
          "x-ms-identifiers": []
        }
      }
    },
    "VirtualMachineRunCommand": {
      "type": "object",
      "description": "Describes a Virtual Machine run command.",
      "properties": {
        "properties": {
          "$ref": "#/definitions/VirtualMachineRunCommandProperties",
          "x-ms-client-flatten": true
        }
      },
      "allOf": [
        {
          "$ref": "../../../common-types/v1/common.json#/definitions/Resource"
        }
      ]
    },
    "VirtualMachineRunCommandInstanceView": {
      "type": "object",
      "description": "The instance view of a virtual machine run command.",
      "properties": {
        "executionState": {
          "type": "string",
          "description": "Script execution status.",
          "enum": [
            "Unknown",
            "Pending",
            "Running",
            "Failed",
            "Succeeded",
            "TimedOut",
            "Canceled"
          ],
          "x-ms-enum": {
            "name": "ExecutionState",
            "modelAsString": true
          }
        },
        "executionMessage": {
          "type": "string",
          "description": "Communicate script configuration errors or execution messages."
        },
        "exitCode": {
          "type": "integer",
          "format": "int32",
          "description": "Exit code returned from script execution."
        },
        "output": {
          "type": "string",
          "description": "Script output stream."
        },
        "error": {
          "type": "string",
          "description": "Script error stream."
        },
        "startTime": {
          "type": "string",
          "format": "date-time",
          "description": "Script start time."
        },
        "endTime": {
          "type": "string",
          "format": "date-time",
          "description": "Script end time."
        },
        "statuses": {
          "type": "array",
          "description": "The resource status information.",
          "items": {
            "$ref": "./computeRPCommon.json#/definitions/InstanceViewStatus"
          },
          "x-ms-identifiers": []
        }
      }
    },
    "VirtualMachineRunCommandProperties": {
      "type": "object",
      "description": "Describes the properties of a Virtual Machine run command.",
      "properties": {
        "source": {
          "$ref": "#/definitions/VirtualMachineRunCommandScriptSource",
          "description": "The source of the run command script."
        },
        "parameters": {
          "type": "array",
          "description": "The parameters used by the script.",
          "items": {
            "$ref": "#/definitions/RunCommandInputParameter"
          },
          "x-ms-identifiers": [
            "name"
          ]
        },
        "protectedParameters": {
          "type": "array",
          "description": "The parameters used by the script.",
          "items": {
            "$ref": "#/definitions/RunCommandInputParameter"
          },
          "x-ms-identifiers": [
            "name"
          ]
        },
        "asyncExecution": {
          "type": "boolean",
          "description": "Optional. If set to true, provisioning will complete as soon as the script starts and will not wait for script to complete.",
          "default": false
        },
        "runAsUser": {
          "type": "string",
          "description": "Specifies the user account on the VM when executing the run command."
        },
        "runAsPassword": {
          "type": "string",
          "description": "Specifies the user account password on the VM when executing the run command."
        },
        "timeoutInSeconds": {
          "type": "integer",
          "format": "int32",
          "description": "The timeout in seconds to execute the run command."
        },
        "outputBlobUri": {
          "type": "string",
          "description": "Specifies the Azure storage blob where script output stream will be uploaded. Use a SAS URI with read, append, create, write access OR use managed identity to provide the VM access to the blob. Refer outputBlobManagedIdentity parameter. "
        },
        "errorBlobUri": {
          "type": "string",
          "description": "Specifies the Azure storage blob where script error stream will be uploaded. Use a SAS URI with read, append, create, write access OR use managed identity to provide the VM access to the blob. Refer errorBlobManagedIdentity parameter."
        },
        "outputBlobManagedIdentity": {
          "$ref": "#/definitions/RunCommandManagedIdentity",
          "description": "User-assigned managed identity that has access to outputBlobUri storage blob. Use an empty object in case of system-assigned identity. Make sure managed identity has been given access to blob's container with 'Storage Blob Data Contributor' role assignment. In case of user-assigned identity, make sure you add it under VM's identity. For more info on managed identity and Run Command, refer https://aka.ms/ManagedIdentity and https://aka.ms/RunCommandManaged "
        },
        "errorBlobManagedIdentity": {
          "$ref": "#/definitions/RunCommandManagedIdentity",
          "description": "User-assigned managed identity that has access to errorBlobUri storage blob. Use an empty object in case of system-assigned identity. Make sure managed identity has been given access to blob's container with 'Storage Blob Data Contributor' role assignment. In case of user-assigned identity, make sure you add it under VM's identity. For more info on managed identity and Run Command, refer https://aka.ms/ManagedIdentity and https://aka.ms/RunCommandManaged "
        },
        "provisioningState": {
          "type": "string",
          "description": "The provisioning state, which only appears in the response. If treatFailureAsDeploymentFailure set to true, any failure in the script will fail the deployment and ProvisioningState will be marked as Failed. If treatFailureAsDeploymentFailure set to false, ProvisioningState would only reflect whether the run command was run or not by the extensions platform, it would not indicate whether script failed in case of script failures. See instance view of run command in case of script failures to see executionMessage, output, error: https://aka.ms/runcommandmanaged#get-execution-status-and-results ",
          "readOnly": true
        },
        "instanceView": {
          "$ref": "#/definitions/VirtualMachineRunCommandInstanceView",
          "description": "The virtual machine run command instance view.",
          "readOnly": true
        },
        "treatFailureAsDeploymentFailure": {
          "type": "boolean",
          "description": "Optional. If set to true, any failure in the script will fail the deployment and ProvisioningState will be marked as Failed. If set to false, ProvisioningState would only reflect whether the run command was run or not by the extensions platform, it would not indicate whether script failed in case of script failures. See instance view of run command in case of script failures to see executionMessage, output, error: https://aka.ms/runcommandmanaged#get-execution-status-and-results ",
          "default": false
        }
      }
    },
    "VirtualMachineRunCommandScriptSource": {
      "type": "object",
      "description": "Describes the script sources for run command. Use only one of script, scriptUri, commandId.",
      "properties": {
        "script": {
          "type": "string",
          "description": "Specifies the script content to be executed on the VM."
        },
        "scriptUri": {
          "type": "string",
          "description": "Specifies the script download location. It can be either SAS URI of an Azure storage blob with read access or public URI."
        },
        "commandId": {
          "type": "string",
          "description": "Specifies a commandId of predefined built-in script."
        },
        "scriptUriManagedIdentity": {
          "$ref": "#/definitions/RunCommandManagedIdentity",
          "description": "User-assigned managed identity that has access to scriptUri in case of Azure storage blob. Use an empty object in case of system-assigned identity. Make sure the Azure storage blob exists, and managed identity has been given access to blob's container with 'Storage Blob Data Reader' role assignment. In case of user-assigned identity, make sure you add it under VM's identity. For more info on managed identity and Run Command, refer https://aka.ms/ManagedIdentity and https://aka.ms/RunCommandManaged."
        }
      }
    },
    "VirtualMachineRunCommandUpdate": {
      "type": "object",
      "description": "Describes a Virtual Machine run command.",
      "properties": {
        "properties": {
          "$ref": "#/definitions/VirtualMachineRunCommandProperties",
          "x-ms-client-flatten": true
        }
      },
      "allOf": [
        {
          "$ref": "./computeRPCommon.json#/definitions/UpdateResource"
        }
      ]
    },
    "VirtualMachineRunCommandsListResult": {
      "type": "object",
      "description": "The List run command operation response",
      "properties": {
        "value": {
          "type": "array",
          "description": "The list of run commands",
          "items": {
            "$ref": "#/definitions/VirtualMachineRunCommand"
          }
        },
        "nextLink": {
          "type": "string",
          "description": "The uri to fetch the next page of run commands."
        }
      },
      "required": [
        "value"
      ]
    }
  }
}